From 15d9d591bd8560284ec8b82b022ba0135ae58f82 Mon Sep 17 00:00:00 2001
From: Brad King <brad.king@kitware.com>
Date: Mon, 12 Jun 2023 17:56:53 -0400
Subject: [PATCH 4/9] Tests: Require git to enable RunCMake.CMP0150 test
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 8bit

The test added by commit 550f63447d (ExternalProject/FetchContent:
Support relative remote URLs, 2023-04-21, v3.27.0-rc1~156^2) covers
Git-specific functionality, and requires a `git` tool to be available.

Signed-off-by: Bj√∂rn Esser <besser82@fedoraproject.org>
---
 Tests/RunCMake/CMakeLists.txt | 5 ++++-
 1 file changed, 4 insertions(+), 1 deletion(-)

diff --git a/Tests/RunCMake/CMakeLists.txt b/Tests/RunCMake/CMakeLists.txt
index d4f3341a15..f089a963cd 100644
--- a/Tests/RunCMake/CMakeLists.txt
+++ b/Tests/RunCMake/CMakeLists.txt
@@ -160,7 +160,10 @@ endif()
 add_RunCMake_test(CMP0132)
 add_RunCMake_test(CMP0135)
 add_RunCMake_test(CMP0139)
-add_RunCMake_test(CMP0150)
+
+if(GIT_EXECUTABLE)
+  add_RunCMake_test(CMP0150)
+endif()
 
 # The test for Policy 65 requires the use of the
 # CMAKE_SHARED_LIBRARY_LINK_CXX_FLAGS variable, which both the VS and Xcode
-- 
2.41.0

